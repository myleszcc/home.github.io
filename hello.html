<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>天融系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#6B7280',
                        success: '#22C55E',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        info: '#06B6D4',
                        dark: '#1F2937',
                        light: '#F9FAFB',
                        sidebar: '#0F172A',
                        'sidebar-hover': '#1E293B',
                        'tab-bg': '#F3F4F6',
                        'tab-active': '#FFFFFF',
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',
                        'card-hover': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                        'dropdown': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                    }
                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .transition-height {
                transition: max-height 0.3s ease-in-out;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .tab-transition {
                transition: all 0.2s ease-in-out;
            }
            .sidebar-item-active {
                @apply bg-primary/10 border-l-4 border-primary text-primary;
            }
            .sidebar-item-hover {
                @apply hover:bg-sidebar-hover transition-colors duration-200;
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-50 text-gray-800 min-h-screen flex flex-col overflow-hidden">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-md z-50 flex items-center justify-between h-16 px-4 border-b border-gray-200">
        <!-- 左侧汉堡菜单和系统名称 -->
        <div class="flex items-center">
            <button id="sidebar-toggle" class="p-2 rounded-lg hover:bg-gray-100 transition-colors mr-4">
                <i class="fa fa-bars text-gray-600"></i>
            </button>
            <div class="flex items-center">
                <i class="fa fa-cubes text-primary text-2xl mr-2"></i>
                <h1 class="text-xl font-bold text-primary">天融系统</h1>
            </div>
        </div>
        
        <!-- 右侧用户信息和操作 -->
        <div class="flex items-center space-x-4">
            <button class="p-2 rounded-full hover:bg-gray-100 transition-colors relative">
                <i class="fa fa-bell text-gray-600"></i>
                <span class="absolute top-1 right-1 w-2 h-2 bg-danger rounded-full"></span>
            </button>
            <button class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                <i class="fa fa-cog text-gray-600"></i>
            </button>
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center">
                    <i class="fa fa-user text-primary"></i>
                </div>
                <span class="hidden md:inline-block">管理员</span>
                <i class="fa fa-angle-down text-gray-600"></i>
            </div>
        </div>
    </header>

    <!-- 主内容区域 -->
    <div class="flex flex-1 overflow-hidden">
        <!-- 左侧导航栏 -->
        <aside id="sidebar" class="bg-sidebar text-gray-300 w-64 flex-shrink-0 transition-all duration-300 overflow-y-auto">
            <!-- 侧边栏头部 -->
            <div class="p-4 border-b border-gray-700">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-semibold">功能菜单</h2>
                    <button id="sidebar-collapse" class="p-1 rounded hover:bg-gray-700 transition-colors">
                        <i class="fa fa-angle-left text-sm"></i>
                    </button>
                </div>
            </div>
            
            <!-- 导航菜单 -->
            <nav class="py-4">
                <div class="px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">
                    主功能区
                </div>
                <ul class="mt-1">
                 <!-- 新增财务中心菜单 -->
                    <li class="relative group">
                        <a href="#" class="flex items-center px-4 py-3 sidebar-item-hover">
                            <i class="fa fa-money w-5 h-5 mr-3"></i>
                            <span>财务中心</span>
                            <i class="fa fa-angle-down ml-auto transition-transform duration-200 group-hover:rotate-180"></i>
                        </a>
                        <!-- 子菜单 -->
                        <ul class="pl-8 bg-sidebar-hover/50 transition-all duration-300 max-h-0 overflow-hidden opacity-0 group-hover:max-h-96 group-hover:opacity-100">
                            <li>
                                <a href="#" id="bhb-files-link" class="flex items-center px-4 py-2 sidebar-item-hover text-sm">
                                    <i class="fa fa-file-excel-o w-5 h-5 mr-3"></i>
                                    <span>报货表档案</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                
                <div class="px-4 py-2 mt-4 text-xs font-semibold text-gray-500 uppercase tracking-wider">
                    系统设置
                </div>
                <ul class="mt-1">
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 sidebar-item-hover">
                            <i class="fa fa-cog w-5 h-5 mr-3"></i>
                            <span>系统配置</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 sidebar-item-hover">
                            <i class="fa fa-user-circle w-5 h-5 mr-3"></i>
                            <span>用户管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 sidebar-item-hover">
                            <i class="fa fa-lock w-5 h-5 mr-3"></i>
                            <span>权限管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 sidebar-item-hover">
                            <i class="fa fa-history w-5 h-5 mr-3"></i>
                            <span>操作日志</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- 右侧内容区域 -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- 标签页导航 -->
            <div class="bg-tab-bg border-b border-gray-200 flex items-center px-2 h-12">
                <button class="p-2 rounded hover:bg-gray-200 transition-colors mr-2">
                    <i class="fa fa-angle-left text-gray-600"></i>
                </button>
                <div class="flex overflow-x-auto scrollbar-hide space-x-1 flex-1" id="tabs-container">
                    <button class="flex items-center px-3 py-2 bg-tab-active rounded-t-lg border border-gray-200 border-b-transparent text-sm font-medium text-primary whitespace-nowrap tab-transition">
                        <span>仪表盘</span>
                        <button class="ml-2 p-1 hover:bg-gray-200 rounded-full transition-colors">
                            <i class="fa fa-times text-xs"></i>
                        </button>
                    </button>
                </div>
                <button class="p-2 rounded hover:bg-gray-200 transition-colors">
                    <i class="fa fa-plus text-gray-600"></i>
                </button>
            </div>

            <!-- 主内容 -->
            <main class="flex-1 overflow-y-auto p-4 bg-gray-50" id="content-container">
                <!-- 页面标题 -->
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">系统仪表盘</h2>
                    <p class="text-gray-600 mt-1">欢迎使用天融系统，今天是 <span id="current-date">2025年5月30日</span></p>
                </div>

               

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <script>
        // 设置当前日期
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('current-date').textContent = now.toLocaleDateString('zh-CN', options);
            
            // 初始化图表
            initCharts();
            
            // 侧边栏切换
            document.getElementById('sidebar-toggle').addEventListener('click', function() {
                const sidebar = document.getElementById('sidebar');
                sidebar.classList.toggle('-translate-x-full');
            });
            
            // 侧边栏折叠
            document.getElementById('sidebar-collapse').addEventListener('click', function() {
                const sidebar = document.getElementById('sidebar');
                sidebar.classList.toggle('w-64');
                sidebar.classList.toggle('w-20');
                
                const sidebarTexts = document.querySelectorAll('#sidebar span');
                sidebarTexts.forEach(text => {
                    text.classList.toggle('hidden');
                });
                
                const sidebarCollapseIcon = document.getElementById('sidebar-collapse').querySelector('i');
                sidebarCollapseIcon.classList.toggle('fa-angle-left');
                sidebarCollapseIcon.classList.toggle('fa-angle-right');
            });
            
            // 处理报货表档案链接点击事件
            document.getElementById('bhb-files-link').addEventListener('click', function(e) {
                e.preventDefault();
                
                // 添加新标签页
                addNewTab('报货表档案', 'bhbfiles.html');
                
                // 加载报货表档案内容
                loadContent('bhbfiles.html');
            });
        });

  
        // 添加新标签页
        function addNewTab(title, url) {
            const tabsContainer = document.getElementById('tabs-container');
            
            // 检查标签页是否已存在
            const existingTab = Array.from(tabsContainer.children).find(tab => 
                tab.querySelector('span').textContent === title
            );
            
            if (existingTab) {
                // 如果标签页已存在，激活它
                Array.from(tabsContainer.children).forEach(tab => {
                    tab.classList.remove('bg-tab-active', 'border-b-transparent', 'text-primary');
                    tab.classList.add('bg-transparent', 'text-gray-600');
                });
                existingTab.classList.add('bg-tab-active', 'border-b-transparent', 'text-primary');
                existingTab.classList.remove('bg-transparent', 'text-gray-600');
                return;
            }
            
            // 创建新标签页
            const newTab = document.createElement('button');
            newTab.className = 'flex items-center px-3 py-2 bg-tab-active rounded-t-lg border border-gray-200 border-b-transparent text-sm font-medium text-primary whitespace-nowrap tab-transition';
            newTab.innerHTML = `
                <span>${title}</span>
                <button class="ml-2 p-1 hover:bg-gray-200 rounded-full transition-colors close-tab">
                    <i class="fa fa-times text-xs"></i>
                </button>
            `;
            
            // 添加点击事件
            newTab.addEventListener('click', function() {
                Array.from(tabsContainer.children).forEach(tab => {
                    tab.classList.remove('bg-tab-active', 'border-b-transparent', 'text-primary');
                    tab.classList.add('bg-transparent', 'text-gray-600');
                });
                this.classList.add('bg-tab-active', 'border-b-transparent', 'text-primary');
                this.classList.remove('bg-transparent', 'text-gray-600');
                
                // 加载对应内容
                loadContent(url);
            });
            
            // 添加关闭事件
            newTab.querySelector('.close-tab').addEventListener('click', function(e) {
                e.stopPropagation();
                newTab.remove();
                
                // 如果关闭的是当前激活的标签页，激活前一个标签页
                if (newTab.classList.contains('bg-tab-active')) {
                    const tabs = Array.from(tabsContainer.children);
                    if (tabs.length > 0) {
                        const lastTab = tabs[tabs.length - 1];
                        lastTab.classList.add('bg-tab-active', 'border-b-transparent', 'text-primary');
                        lastTab.classList.remove('bg-transparent', 'text-gray-600');
                        
                        // 加载对应内容
                        const lastTabTitle = lastTab.querySelector('span').textContent;
                        let lastTabUrl = '';
                        
                        switch(lastTabTitle) {
                            case '仪表盘':
                                lastTabUrl = 'dashboard.html';
                                break;
                            case '报货表档案':
                                lastTabUrl ='E:/JS/tianrong-oa/bhbfiles.html';
                                break;
                            // 添加其他标签页的URL映射
                            default:
                                lastTabUrl = 'dashboard.html';
                        }
                        
                        loadContent(lastTabUrl);
                    } else {
                        // 如果没有标签页了，加载默认内容
                        loadContent('dashboard.html');
                    }
                }
            });
            
            // 添加到容器
            tabsContainer.appendChild(newTab);
            
            // 激活新标签页
            Array.from(tabsContainer.children).forEach(tab => {
                tab.classList.remove('bg-tab-active', 'border-b-transparent', 'text-primary');
                tab.classList.add('bg-transparent', 'text-gray-600');
            });
            newTab.classList.add('bg-tab-active', 'border-b-transparent', 'text-primary');
            newTab.classList.remove('bg-transparent', 'text-gray-600');
        }
        
        // 加载内容
        function loadContent(url) {
            const contentContainer = document.getElementById('content-container');
            
            // 清空当前内容
            contentContainer.innerHTML = '';
            
            
            }
        
